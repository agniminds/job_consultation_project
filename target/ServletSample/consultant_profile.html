<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Profile</title>

    <meta
      name="description"
      content="Source code generated using layoutit.com"
    />
    <meta name="author" content="LayoutIt!" />

    <link href="css/bootstrap.min.css" rel="stylesheet" />
    <link href="css/style_consultant.css" rel="stylesheet" />
    <script src="js/jquery.min.js"></script>
    <script>
      $(document).ready(function () {
        console.log("Profile has been loaded");

        $.get("loggedinuserServlet", function (data) {
          console.log(data);

          $("#name").html(data.name);
          $("#text_name").val(data.name);
          $("#username").html(data.username);
          $("#text_username").val(data.username);
          $("#password").html(data.password);
          $("#text_password").val(data.password);
          $("#type").html(data.type);
          $("#text_type").val(data.type);
          $("#role").html(data.role);
          $("#text_role").val(data.role);
          $("#id").html(data.id);
        });

        $("#update_btn").on("click", function (event) {
          event.preventDefault();

          var myObject = new Object();
          myObject.username = $("#text_username").val();
          myObject.password = $("#text_password").val();
          myObject.name = $("#text_name").val();
          myObject.role = $("#text_role").val();
          myObject.type = $("#text_type").val();
          console.log(JSON.stringify(myObject));

          $.ajax({
            type: "PUT",
            url: "http://localhost:8080/ServletSample/consultantServlet",
            data: JSON.stringify(myObject),
            success: function (response) {
              alert("User data updated successfully");
            },
            dataType: "json",
            error: function () {
              alert("Error!");
            },
          }).done(function (data) {
            $("#name").html(data.name);
            $("#text_name").val(data.name);
            $("#username").html(data.username);
            $("#text_username").val(data.username);
            $("#password").html(data.password);
            $("#text_password").val(data.password);
            $("#type").html(data.type);
            $("#text_type").val(data.type);
            $("#role").html(data.role);
            $("#text_role").val(data.role);
            $("#id").html(data.id);
          });
        });
      });
    </script>
  </head>

  <body>
    <div class="container">
      <div class="row">
        <div class="col-md-12">
          <ul class="nav">
            <li class="nav-item">
              <a class="nav-link active" href="#">Home</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#">Profile</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#">Slots</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#">Appoinments</a>
            </li>
          </ul>
          <br />
          <table class="table table-bordered">
            <thead>
              <tr class="table-active">
                <th>#</th>
                <th>Data</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>ID</td>
                <td>
                  <label id="id"></label>
                </td>
              </tr>
              <tr>
                <td>USERNAME</td>
                <td>
                  <label id="username"></label>
                </td>
              </tr>
              <tr>
                <td>PASSWORD</td>
                <td><label id="password"></label></td>
              </tr>
              <tr>
                <td>NAME</td>
                <td>
                  <label id="name"></label>
                </td>
              </tr>
              <tr>
                <td>TYPE</td>
                <td><label id="type"></label></td>
              </tr>
              <tr>
                <td>ROLE</td>
                <td><label id="role"></label></td>
              </tr>
            </tbody>
          </table>
          <br />
          <h2>Update User</h2>
          <br />
          <br />
          <form role="form">
            <div class="form-group">
              <label for="exampleInputEmail1"> Username </label>
              <input class="form-control" id="text_username" />
            </div>
            <div class="form-group">
              <label for="exampleInputPassword1"> Password </label>
              <input class="form-control" id="text_password" />
            </div>

            <div class="form-group">
              <label for="exampleInputPassword1"> Name </label>
              <input class="form-control" id="text_name" />
            </div>

            <div class="form-group">
              <label for="exampleInputPassword1"> Type </label>
              <input class="form-control" id="text_type" />
            </div>

            <div class="form-group">
              <label for="exampleInputPassword1"> Role </label>
              <input class="form-control" id="text_role" />
            </div>

            <button type="submit" class="btn btn-primary">Get</button>

            <button type="submit" class="btn btn-primary" id="update_btn">
              Update
            </button>
          </form>
        </div>
      </div>
    </div>
  </body>
</html>
